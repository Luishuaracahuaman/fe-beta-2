<section class="table-section">
  <div class="table-header">
    <h2>Listado de Prendas</h2>
    
    <div class="filters">
      <!-- Filtro de estado reutilizable -->
      <app-state-filter 
        [currentFilter]="currentStateFilter"
        (filterChange)="onStateFilterChange($event)"
        class="state-filter-container">
      </app-state-filter>

      <!-- Búsqueda por nombre -->
      <input 
        type="text" 
        [(ngModel)]="busquedaNombre" 
        placeholder="Buscar por nombre..."
        class="search-input">

      <!-- Select de estado -->
      <select [(ngModel)]="filtroEstado" class="filter-select" (change)="onSelectChange()">
        <option value="T">Todos</option>
        <option value="A">Activos</option>
        <option value="I">Inactivos</option>
      </select>

      <!-- Botones de acción -->
      <button (click)="agregarPrenda()" class="btn-add">
        <mat-icon>add</mat-icon> Nueva Prenda
      </button>
      <button (click)="reportPdf()" class="btn-report">
        <mat-icon>picture_as_pdf</mat-icon> Generar PDF
      </button>
      <button (click)="reiniciar()" class="btn-reset">
        <mat-icon>refresh</mat-icon> Reiniciar
      </button>
    </div>
  </div>

  <table class="garment-table">
    <thead>
      <tr>
        <th class="id-column">ID</th>
        <th class="name-column">Nombre</th>
        <th class="size-column">Talla</th>
        <th class="color-column">Color</th>
        <th class="price-column">Precio</th>
        <th class="stock-column">Stock</th>
        <th class="state-column">Estado</th>
        <th class="register-column">Registro</th>
        <th class="actions-column">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let prenda of prendasFiltradas">
        <td class="id-column">{{ prenda.identificador }}</td>
        <td class="name-column">{{ prenda.nombre | uppercase }}</td>
        <td class="size-column">{{ prenda.talla_prenda }}</td>
        <td class="color-column">{{ prenda.color | titlecase }}</td>
        <td class="price-column">{{ prenda.precio_sugerido | currency:'PEN ' }}</td>
        <td class="stock-column">{{ prenda.stock }}</td>
        <td class="state-column">
          <span class="estado" [ngClass]="prenda.estado === 'A' ? 'activo' : 'inactivo'">
            {{ prenda.estado | stateTransform }}
          </span>
        </td>
        <td class="register-column">{{ prenda.fecha_registro | date:'dd/MM/yyyy - HH:mm' }}</td>
        <td class="actions-column">
          <button title="Editar" (click)="editar(prenda)" class="btn-edit">
            <mat-icon>edit</mat-icon>
          </button>
          <button *ngIf="prenda.estado === 'A'" title="Eliminar" (click)="eliminar(prenda.identificador)" class="btn-delete">
            <mat-icon>delete</mat-icon>
          </button>
          <button *ngIf="prenda.estado === 'I'" title="Restaurar" (click)="restaurar(prenda.identificador)" class="btn-restore">
            <mat-icon>restore</mat-icon>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</section>